// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;
using Pulumi;

namespace PiersKarsenbarg.Nutanix
{
    /// <summary>
    /// &gt; - The Pc Restore V2 resource is an action-only resource that supports creating actions. The update and delete operations have no effect. To run it again, destroy and reapply the resource.
    /// &gt; -  We need to increase the timeout for restoring the PC, because the restore pc takes longer than the default timeout allows for the operation to complete.
    /// 
    /// The restore domain manager is a task-driven operation to restore a domain manager from a cluster or object store backup location based on the selected restore point.
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Command = Pulumi.Command;
    /// using Nutanix = PiersKarsenbarg.Nutanix;
    /// using Nutanix = Pulumi.Nutanix;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     // Fetch Cluster Ext ID from PC
    ///     var clusters = Nutanix.GetClustersV2.Invoke();
    /// 
    ///     var domainManagerExtId = cls.ClusterEntities[0].ExtId;
    /// 
    ///     var clusterExtId = .Where(cluster =&gt; cluster.Config[0].ClusterFunction[0] != "PRISM_CENTRAL").Select(cluster =&gt; 
    ///     {
    ///         return cluster.ExtId;
    ///     }).ToList()[0];
    /// 
    ///     // Create a restore source, before make sure to get the cluster ext_id from PC and create backup target
    ///     // wait until backup target is synced, you can check the last_sync_time from the backup target data source
    ///     var cluster_location = new Nutanix.PcRestoreSourceV2("cluster-location", new()
    ///     {
    ///         Location = new Nutanix.Inputs.PcRestoreSourceV2LocationArgs
    ///         {
    ///             ClusterLocations = new[]
    ///             {
    ///                 new Nutanix.Inputs.PcRestoreSourceV2LocationClusterLocationArgs
    ///                 {
    ///                     Configs = new[]
    ///                     {
    ///                         new Nutanix.Inputs.PcRestoreSourceV2LocationClusterLocationConfigArgs
    ///                         {
    ///                             ExtId = clusterExtId,
    ///                         },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var restorable_pcs = Nutanix.GetRestorablePcsV2.Invoke(new()
    ///     {
    ///         RestoreSourceExtId = cluster_location.ExtId,
    ///     });
    /// 
    ///     var restorablePcExtId = restorable_pcs.Apply(restorable_pcs =&gt; restorable_pcs.Apply(getRestorablePcsV2Result =&gt; getRestorablePcsV2Result.RestorablePcs[0]?.ExtId));
    /// 
    ///     var restore_points = Nutanix.GetPcRestorePointsV2.Invoke(new()
    ///     {
    ///         RestorableDomainManagerExtId = restorablePcExtId,
    ///         RestoreSourceExtId = cluster_location.Id,
    ///     });
    /// 
    ///     var restore_point = Nutanix.GetPcRestorePointV2.Invoke(new()
    ///     {
    ///         RestoreSourceExtId = cluster_location.Id,
    ///         RestorableDomainManagerExtId = restorablePcExtId,
    ///         ExtId = restore_points.Apply(getPcRestorePointsV2Result =&gt; getPcRestorePointsV2Result.RestorePoints[0]?.ExtId),
    ///     });
    /// 
    ///     var restorePoint = restore_point;
    /// 
    ///     // define the restore pc resource
    ///     // you can get these values from the data source nutanix_pc_v2, this data source is on PC provider
    ///     var test = new Nutanix.PcRestoreV2("test", new()
    ///     {
    ///         ExtId = restorePoint.Apply(restorePoint =&gt; restorePoint.ExtId),
    ///         RestoreSourceExtId = cluster_location.Id,
    ///         RestorableDomainManagerExtId = restorablePcExtId,
    ///         DomainManager = new Nutanix.Inputs.PcRestoreV2DomainManagerArgs
    ///         {
    ///             Networks = new[]
    ///             {
    ///                 new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkArgs
    ///                 {
    ///                     NameServers = ,
    ///                     NtpServers = ,
    ///                     ExternalAddress = new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalAddressArgs
    ///                     {
    ///                         Ipv4s = new[]
    ///                         {
    ///                             new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalAddressIpv4Args
    ///                             {
    ///                                 Value = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Network[0].ExternalAddress[0].Ipv4[0].Value),
    ///                             },
    ///                         },
    ///                     },
    ///                     ExternalNetworks = new[]
    ///                     {
    ///                         new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkArgs
    ///                         {
    ///                             NetworkExtId = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Network[0].ExternalNetworks[0].NetworkExtId),
    ///                             DefaultGateway = new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkDefaultGatewayArgs
    ///                             {
    ///                                 Ipv4s = new[]
    ///                                 {
    ///                                     new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkDefaultGatewayIpv4Args
    ///                                     {
    ///                                         Value = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Network[0].ExternalNetworks[0].DefaultGateway[0].Ipv4[0].Value),
    ///                                     },
    ///                                 },
    ///                             },
    ///                             SubnetMask = new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkSubnetMaskArgs
    ///                             {
    ///                                 Ipv4s = new[]
    ///                                 {
    ///                                     new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkSubnetMaskIpv4Args
    ///                                     {
    ///                                         Value = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Network[0].ExternalNetworks[0].SubnetMask[0].Ipv4[0].Value),
    ///                                     },
    ///                                 },
    ///                             },
    ///                             IpRanges = new[]
    ///                             {
    ///                                 new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkIpRangeArgs
    ///                                 {
    ///                                     Begin = new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkIpRangeBeginArgs
    ///                                     {
    ///                                         Ipv4s = new[]
    ///                                         {
    ///                                             new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkIpRangeBeginIpv4Args
    ///                                             {
    ///                                                 Value = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Network[0].ExternalNetworks[0].IpRanges[0].Begin[0].Ipv4[0].Value),
    ///                                             },
    ///                                         },
    ///                                     },
    ///                                     End = new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkIpRangeEndArgs
    ///                                     {
    ///                                         Ipv4s = new[]
    ///                                         {
    ///                                             new Nutanix.Inputs.PcRestoreV2DomainManagerNetworkExternalNetworkIpRangeEndIpv4Args
    ///                                             {
    ///                                                 Value = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Network[0].ExternalNetworks[0].IpRanges[0].End[0].Ipv4[0].Value),
    ///                                             },
    ///                                         },
    ///                                     },
    ///                                 },
    ///                             },
    ///                         },
    ///                     },
    ///                 },
    ///             },
    ///             Configs = new[]
    ///             {
    ///                 new Nutanix.Inputs.PcRestoreV2DomainManagerConfigArgs
    ///                 {
    ///                     ShouldEnableLockdownMode = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].ShouldEnableLockdownMode),
    ///                     BuildInfo = new Nutanix.Inputs.PcRestoreV2DomainManagerConfigBuildInfoArgs
    ///                     {
    ///                         Version = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].BuildInfo[0].Version),
    ///                     },
    ///                     Name = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].Name),
    ///                     Size = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].Size),
    ///                     ResourceConfigs = new[]
    ///                     {
    ///                         new Nutanix.Inputs.PcRestoreV2DomainManagerConfigResourceConfigArgs
    ///                         {
    ///                             ContainerExtIds = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].ResourceConfig[0].ContainerExtIds),
    ///                             DataDiskSizeBytes = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].ResourceConfig[0].DataDiskSizeBytes),
    ///                             MemorySizeBytes = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].ResourceConfig[0].MemorySizeBytes),
    ///                             NumVcpus = restorePoint.Apply(restorePoint =&gt; restorePoint.DomainManager[0].Config[0].ResourceConfig[0].NumVcpus),
    ///                         },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var testProvisioner0 = new Command.Local.Command("testProvisioner0", new()
    ///     {
    ///         Create = "sshpass -p 'nutanix/4u' ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null nutanix@10.44.76.16 '/home/nutanix/prism/cli/ncli user reset-password user-name=admin password=o.P.5.#.s.U.Z.f ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=n.L.9.@.P.Y ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=g.B.1.$.U.$.2.@ ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=r.B.7.$.V.9.W ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=l.H.2.$.2.a.a.P ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=q.F.4.#.u.t ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=n.T.0.#.r ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=s.K.0.$.w ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=o.K.7.@.j ; /home/nutanix/prism/cli/ncli user reset-password user-name=admin password=Nutanix.123'",
    ///     }, new CustomResourceOptions
    ///     {
    ///         DependsOn =
    ///         {
    ///             test,
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// </summary>
    [NutanixResourceType("nutanix:index/pcRestoreV2:PcRestoreV2")]
    public partial class PcRestoreV2 : global::Pulumi.CustomResource
    {
        /// <summary>
        /// -(Required) Domain manager (Prism Central) details.
        /// </summary>
        [Output("domainManager")]
        public Output<Outputs.PcRestoreV2DomainManager> DomainManager { get; private set; } = null!;

        /// <summary>
        /// -(Required) Restore point ID for the backup created in cluster/object store.
        /// </summary>
        [Output("extId")]
        public Output<string> ExtId { get; private set; } = null!;

        /// <summary>
        /// -(Required) A unique identifier for the domain manager.
        /// </summary>
        [Output("restorableDomainManagerExtId")]
        public Output<string> RestorableDomainManagerExtId { get; private set; } = null!;

        /// <summary>
        /// -(Required) A unique identifier obtained from the restore source API that corresponds to the details provided for the restore source.
        /// </summary>
        [Output("restoreSourceExtId")]
        public Output<string> RestoreSourceExtId { get; private set; } = null!;


        /// <summary>
        /// Create a PcRestoreV2 resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public PcRestoreV2(string name, PcRestoreV2Args args, CustomResourceOptions? options = null)
            : base("nutanix:index/pcRestoreV2:PcRestoreV2", name, args ?? new PcRestoreV2Args(), MakeResourceOptions(options, ""))
        {
        }

        private PcRestoreV2(string name, Input<string> id, PcRestoreV2State? state = null, CustomResourceOptions? options = null)
            : base("nutanix:index/pcRestoreV2:PcRestoreV2", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                PluginDownloadURL = "github://api.github.com/pierskarsenbarg/pulumi-nutanix",
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing PcRestoreV2 resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static PcRestoreV2 Get(string name, Input<string> id, PcRestoreV2State? state = null, CustomResourceOptions? options = null)
        {
            return new PcRestoreV2(name, id, state, options);
        }
    }

    public sealed class PcRestoreV2Args : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// -(Required) Domain manager (Prism Central) details.
        /// </summary>
        [Input("domainManager", required: true)]
        public Input<Inputs.PcRestoreV2DomainManagerArgs> DomainManager { get; set; } = null!;

        /// <summary>
        /// -(Required) Restore point ID for the backup created in cluster/object store.
        /// </summary>
        [Input("extId", required: true)]
        public Input<string> ExtId { get; set; } = null!;

        /// <summary>
        /// -(Required) A unique identifier for the domain manager.
        /// </summary>
        [Input("restorableDomainManagerExtId", required: true)]
        public Input<string> RestorableDomainManagerExtId { get; set; } = null!;

        /// <summary>
        /// -(Required) A unique identifier obtained from the restore source API that corresponds to the details provided for the restore source.
        /// </summary>
        [Input("restoreSourceExtId", required: true)]
        public Input<string> RestoreSourceExtId { get; set; } = null!;

        public PcRestoreV2Args()
        {
        }
        public static new PcRestoreV2Args Empty => new PcRestoreV2Args();
    }

    public sealed class PcRestoreV2State : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// -(Required) Domain manager (Prism Central) details.
        /// </summary>
        [Input("domainManager")]
        public Input<Inputs.PcRestoreV2DomainManagerGetArgs>? DomainManager { get; set; }

        /// <summary>
        /// -(Required) Restore point ID for the backup created in cluster/object store.
        /// </summary>
        [Input("extId")]
        public Input<string>? ExtId { get; set; }

        /// <summary>
        /// -(Required) A unique identifier for the domain manager.
        /// </summary>
        [Input("restorableDomainManagerExtId")]
        public Input<string>? RestorableDomainManagerExtId { get; set; }

        /// <summary>
        /// -(Required) A unique identifier obtained from the restore source API that corresponds to the details provided for the restore source.
        /// </summary>
        [Input("restoreSourceExtId")]
        public Input<string>? RestoreSourceExtId { get; set; }

        public PcRestoreV2State()
        {
        }
        public static new PcRestoreV2State Empty => new PcRestoreV2State();
    }
}
